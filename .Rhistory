"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Pre- or Post-1991"
) %>%
addLegend(pal = pal1,
data = points,
values = ~if1991,
group = "Pre- or Post-1991",
position = "topright",
title = "Year Built",
layerId = "Pre- or Post-1991"
) %>%
addCircleMarkers(data = points,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
color = ~pal2(yearGroup),
popup = ~paste("Address:", situs,
"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Year Category"
) %>%
addLegend(pal = pal2,
data = points,
values = ~yearGroup,
group = "Year Category",
position = "topright",
title = "Year Built",
layerId = "Year Category"
) %>%
addCircleMarkers(data = points,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
color = ~pal3(SUBDIV),
popup = ~paste("Address:", situs,
"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Subdivision"
) %>%
addLegend(pal = pal3,
data = points,
values = ~SUBDIV,
group = "Subdivision",
position = "topright",
title = "Subdivision",
layerId = "Subdivision"
) %>%
addCircleMarkers(data = points2,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
popup = ~paste("Address:", situs,
"<br>Zoning:", LUC_desc
),
group = "Mobile or Trailer Homes"
) %>%
leaflet.extras::addResetMapButton() %>%
htmlwidgets::onRender("
function(el, x) {
var initialLegend = 'Pre- or Post-1991' // Set the initial legend to be displayed by layerId
var myMap = this;
for (var legend in myMap.controls._controlsById) {
var el = myMap.controls.get(legend.toString())._container;
if(legend.toString() === initialLegend) {
el.style.display = 'block';
} else {
el.style.display = 'none';
};
};
myMap.on('baselayerchange',
function (layer) {
for (var legend in myMap.controls._controlsById) {
var el = myMap.controls.get(legend.toString())._container;
if(legend.toString() === layer.name) {
el.style.display = 'block';
} else {
el.style.display = 'none';
};
};
});
}") #https://gist.github.com/noamross/98c2053d81085517e686407096ec0a69
m <- leaflet(width = "100%") %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addPolygons(data = town,
weight = 2,
opacity = .5,
color = "black",
fillOpacity = .01) %>%
addLayersControl(baseGroups = c("Pre- or Post-1991", "Year Category", "Subdivision", "Mobile or Trailer Homes"),
options = layersControlOptions(collapsed = FALSE,),
position = "topright"
) %>%
addCircleMarkers(data = points,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
color = ~pal1(if1991),
popup = ~paste("Address:", situs,
"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Pre- or Post-1991"
) %>%
addLegend(pal = pal1,
data = points,
values = ~if1991,
group = "Pre- or Post-1991",
position = "topright",
title = "Year Built",
layerId = "Pre- or Post-1991"
) %>%
addCircleMarkers(data = points,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
color = ~pal2(yearGroup),
popup = ~paste("Address:", situs,
"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Year Category"
) %>%
addLegend(pal = pal2,
data = points,
values = ~yearGroup,
group = "Year Category",
position = "topright",
title = "Year Built",
layerId = "Year Category"
) %>%
addCircleMarkers(data = points,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
color = ~pal3(SUBDIV),
popup = ~paste("Address:", situs,
"<br>Year Built:", year,
"<br>Zoning:", LUC_desc,
"<br>Subdivision:", SUBDIV
),
group = "Subdivision"
) %>%
addLegend(pal = pal3,
data = points,
values = ~SUBDIV,
group = "Subdivision",
position = "topright",
title = "Subdivision",
layerId = "Subdivision"
) %>%
addCircleMarkers(data = points2,
radius = 4,
weight = 2,
opacity = .8,
stroke = TRUE,
popup = ~paste("Address:", situs,
"<br>Zoning:", LUC_desc
),
group = "Mobile or Trailer Homes"
) %>%
leaflet.extras::addResetMapButton() %>%
htmlwidgets::onRender("
function(el, x) {
var initialLegend = 'Pre- or Post-1991' // Set the initial legend to be displayed by layerId
var myMap = this;
for (var legend in myMap.controls._controlsById) {
var el = myMap.controls.get(legend.toString())._container;
if(legend.toString() === initialLegend) {
el.style.display = 'block';
} else {
el.style.display = 'none';
};
};
myMap.on('baselayerchange',
function (layer) {
for (var legend in myMap.controls._controlsById) {
var el = myMap.controls.get(legend.toString())._container;
if(legend.toString() === layer.name) {
el.style.display = 'block';
} else {
el.style.display = 'none';
};
};
});
}") #https://gist.github.com/noamross/98c2053d81085517e686407096ec0a69
m
ggplot()+
geom_sf(data = background)+
geom_sf(data = town)+
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 1)
ggplot()+
geom_sf(data = background)+
geom_sf(data = town)+
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 2)
ggplot()+
geom_sf(data = background)+
geom_sf(data = town)+
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)
cc_roads <- roads(state = "PA", county = "Chester")
cc_roads <- roads(state = "PA", county = "Chester")%>%
st_transform(crs="EPSG:4326") %>%
st_intersection(.,bbox_sf)
ggplot()+
geom_sf(data = background)+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)
theme_cc <- function(){
font = "sans"
theme_minimal() %+replace%
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.ticks = element_blank(),
axis.ticks.x.bottom = element_line(
color = "grey90",
size = .5),
plot.title = element_text(
family = font,
size = 14,
face = 'bold',
hjust = 0,
vjust = 0),
plot.subtitle = element_text(
family = font,
size = 12,
hjust = 0,
margin = margin(2, b = 10),
face = "italic"),
plot.caption = element_text(
family = font,
size = 10,
hjust = 1),
axis.title = element_text(
family = font,
size = 10,
margin = margin(5, b = 10)),
axis.text = element_blank(),
legend.position = "right",
legend.text = element_text(
family = font,
size = 8)
)
}
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)+
theme_cc
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .7, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
cc_water <- area_water(state = "PA", county = "Chester")%>%
st_transform(crs="EPSG:4326") %>%
st_intersection(.,bbox_sf)
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data= cc_water)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data= cc_water)+
geom_sf(data = cc_roads, fill = "lightblue", color = NA) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town)+
geom_sf(data= cc_water, fill = "lightblue", color = NA)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town, color = "grey80", fill = "grey90")+
geom_sf(data= cc_water, fill = "lightblue", color = NA)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town, color = "grey20", fill = "grey90")+
geom_sf(data= cc_water, fill = "lightblue", color = NA)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90", lwd = 2)+
geom_sf(data = town, color = "grey20", fill = "grey90", lwd = 2)+
geom_sf(data= cc_water, fill = "lightblue", color = NA)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town, color = "grey20", fill = "grey90", lwd = 1)+
geom_sf(data= cc_water, fill = "lightblue", color = NA)+
geom_sf(data = cc_roads) +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data = town, color = "grey20", fill = "grey90", lwd = 1)+
geom_sf(data= cc_water, fill = "darkblue", color = NA)+
geom_sf(data = cc_roads, color = "grey60") +
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data= cc_water, fill = "darkblue", color = NA)+
geom_sf(data = cc_roads, color = "grey60") +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = "grey90")+
geom_sf(data= cc_water, fill = "darkblue", color = NA)+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = NA)+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue"")+
ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
ggsave("images/Avondale_1991.png", plot = Avondale_1991, dpi=300)
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_years
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
scale_color_viridis_c()+
labs(color = "Year Built")+
theme_cc()
Avondale_years
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
scale_color_viridis_d()+
labs(color = "Year Built")+
theme_cc()
Avondale_years
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "darkblue", color = "darkblue")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
scale_color_viridis_d(option = "H")+
labs(color = "Year Built")+
theme_cc()
Avondale_years
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "royalblue1", color = "royalblue1")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_1991
Avondale_years
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = NA)+
geom_sf(data= cc_water, fill = "royalblue1", color = "royalblue1")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
scale_color_viridis_d(option = "H")+
labs(color = "Year Built")+
theme_cc()
Avondale_years
ggsave("images/Avondale_1991.png", plot = Avondale_1991, dpi=300)
ggsave("images/Avondale_years.png", plot = Avondale_years, dpi=300)
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = "white")+
geom_sf(data= cc_water, fill = "royalblue1", color = "royalblue1")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()
Avondale_1991
Avondale_years <- ggplot()+
geom_sf(data = background, color = "grey80", fill = "white")+
geom_sf(data= cc_water, fill = "royalblue1", color = "royalblue1")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = yearGroup), alpha = .6, size = 3)+
scale_color_viridis_d(option = "H")+
labs(color = "Year Built")+
theme_cc()
Avondale_years
ggsave("images/Avondale_1991.png", plot = Avondale_1991, dpi=300)
ggsave("images/Avondale_years.png", plot = Avondale_years, dpi=300)
Avondale_1991 <- ggplot()+
geom_sf(data = background, color = "grey80", fill = "white")+
geom_sf(data= cc_water, fill = "royalblue1", color = "royalblue1")+
geom_sf(data = cc_roads, color = "grey60", lwd = .8) +
geom_sf(data = town, color = "grey20", fill = "NA", lwd = 1)+
geom_sf(data = points, aes(color = if1991), alpha = .6, size = 3)+
labs(color = "Year Built")+
theme_cc()+
theme(background = "white")
Avondale_1991
